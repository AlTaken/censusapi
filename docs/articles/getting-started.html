<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with censusapi • censusapi</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">censusapi</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/hrecht/censusapi">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Getting started with censusapi</h1>
                        <h4 class="author">Hannah Recht</h4>
            
            <h4 class="date">2017-06-04</h4>
          </div>

    
    
<div class="contents">
<p><code>censusapi</code> is a wrapper for the United States Census Bureau’s <a href="https://www.census.gov/data/developers/data-sets.html">APIs</a>. As of 2017 over 200 Census API endpoints are available, including Decennial Census, American Community Survey, Poverty Statistics, and Population Estimates APIs. This package is designed to let you get data from all of those APIs using the same main function—<code>getCensus</code>—and the same syntax for each dataset.</p>
<p><code>censusapi</code> generally uses the APIs’ original parameter names so that users can easily transition between Census’s documentation and examples and this package. It also includes functions using the dataset discovery service to return dataset metadata, geographies, and variables as data frames.</p>
<div id="api-key-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#api-key-setup" class="anchor"></a>API key setup</h2>
<p>To use the Census APIs, <a href="https://api.census.gov/data/key_signup.html">sign up</a> for an API key. Then, if you’re on a non-shared computer, add your Census API key to your .Renviron profile and call it CENSUS_KEY. <code>censusapi</code> will use it by default without any extra work on your part. Within R, run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Add key to .Renviron</span>
<span class="kw">Sys.setenv</span>(<span class="dt">CENSUS_KEY=</span>YOURKEYHERE)
<span class="co"># Reload .Renviron</span>
<span class="kw">readRenviron</span>(<span class="st">"~/.Renviron"</span>)
<span class="co"># Check to see that the expected key is output in your R console</span>
<span class="kw">Sys.getenv</span>(<span class="st">"CENSUS_KEY"</span>)</code></pre></div>
<p>In some instances you might not want to put your key in your .Renviron - for example, if you’re on a shared school computer. You can always choose to specify your key within <code>getCensus</code> instead.</p>
</div>
<div id="finding-your-api" class="section level2">
<h2 class="hasAnchor">
<a href="#finding-your-api" class="anchor"></a>Finding your API</h2>
<p>To get started, load the <code>censusapi</code> library.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(censusapi)</code></pre></div>
<pre><code>## 
## Attaching package: 'censusapi'</code></pre>
<pre><code>## The following object is masked from 'package:methods':
## 
##     getFunction</code></pre>
<p>The Census APIs have over 200 endpoints, covering dozens of different datasets.</p>
<p>To see a current table of every available endpoint, run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">apis &lt;-<span class="st"> </span><span class="kw"><a href="../reference/listCensusApis.html">listCensusApis</a></span>()
<span class="kw">View</span>(apis)</code></pre></div>
<p><img src="img/apis.png"> This returns useful information about each endpoint, including <code>name</code>, which you’ll need to make your API call.</p>
</div>
<div id="using-getcensus" class="section level2">
<h2 class="hasAnchor">
<a href="#using-getcensus" class="anchor"></a>Using <code>getCensus</code>
</h2>
<p>The main function in <code>censusapi</code> is <code>getCensus</code>, which makes an API call to a given Census API and returns a data frame of results. Each API has slightly different parameters, but there are always a few required arguments:</p>
<ul>
<li>
<code>name</code>: the name of the API as defined by the Census, like “acs5” or “timeseries/bds/firms”</li>
<li>
<code>vintage</code>: the dataset year, generally required for non-timeseries APIs</li>
<li>
<code>vars</code>: the list of variable names to get</li>
<li>
<code>region</code>: the geography level to return, like state or county</li>
</ul>
<p>Some APIs have additional required or optional arguments, like <code>time</code>, <code>monthly</code>, or <code>period</code>. Check the specific <a href="https://www.census.gov/data/developers/data-sets.html">documentation</a> for your API to see what options are allowed.</p>
<p>Let’s walk through an example getting uninsured rates by income group using the <a href="https://www.census.gov/data/developers/data-sets/Health-Insurance-Statistics.html">Small Area Health Insurance Estimates API</a>, which provides detailed annual state-level and county-level estimates of health insurance rates.</p>
<div id="choosing-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#choosing-variables" class="anchor"></a>Choosing variables</h3>
<p><code>censusapi</code> includes a metadata function called <code>listCensusMetadata</code> to get information about an API’s variable options and geography options. Let’s see what variables are available in the SAHIE API:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sahie_vars &lt;-<span class="st"> </span><span class="kw"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span>(<span class="dt">name=</span><span class="st">"timeseries/healthins/sahie"</span>, <span class="dt">type =</span> <span class="st">"variables"</span>)
<span class="kw">head</span>(sahie_vars)</code></pre></div>
<pre><code>##       name                                                           label
## 1 AGE_DESC                                        Age Category Description
## 2 NUI_LB90       Number Uninsured, Lower Bound for 90% Confidence Interval
## 3    STATE                                                 State FIPS Code
## 4  NIC_MOE                                 Number Insured, Margin of Error
## 5  NIPR_PT Number in Demographic Group for Selected Income Range, Estimate
## 6  RACECAT                                                   Race Category
##               concept predicateType limit required
## 1      Demographic ID           int     0       NA
## 2 Uncertainty Measure           int     0       NA
## 3       Geographic ID           int     0       NA
## 4 Uncertainty Measure           int     0       NA
## 5            Estimate           int     0       NA
## 6      Demographic ID           int     0       NA</code></pre>
<p>We’ll use a few of these variables to get uninsured rates by income group:</p>
<ul>
<li>
<code>IPRCAT</code>: Income Poverty Ratio Category</li>
<li>
<code>IPR_DESC</code>: Income Poverty Ratio Category Description</li>
<li>
<code>PCTUI_PT</code>: Percent Uninsured in Demographic Group for Selected Income Range, Estimate</li>
</ul>
<p>We can also use <code>listCensusMetadata</code> to see which geographic levels we can get data for using the SAHIE API.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/listCensusMetadata.html">listCensusMetadata</a></span>(<span class="dt">name=</span><span class="st">"timeseries/healthins/sahie"</span>, <span class="dt">type =</span> <span class="st">"geography"</span>)</code></pre></div>
<pre><code>##     name geoLevelId requires wildcard optionalWithWCFor
## 1     us        010     NULL     NULL              &lt;NA&gt;
## 2 county        050    state    state             state
## 3  state        040     NULL     NULL              &lt;NA&gt;</code></pre>
<p>This API has three geographic levels: <code>us</code>, <code>county</code> within states, and <code>state</code>.</p>
<p>First, using <code>getCensus</code>, let’s get those variables at the national level for 2015.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getCensus.html">getCensus</a></span>(<span class="dt">name=</span><span class="st">"timeseries/healthins/sahie"</span>,
    <span class="dt">vars=</span><span class="kw">c</span>(<span class="st">"IPRCAT"</span>, <span class="st">"IPR_DESC"</span>, <span class="st">"PCTUI_PT"</span>), 
    <span class="dt">region=</span><span class="st">"us:*"</span>, <span class="dt">time=</span><span class="dv">2015</span>)</code></pre></div>
<pre><code>##   IPRCAT                IPR_DESC PCTUI_PT time us
## 1      0             All Incomes     10.9 2015  1
## 2      1      &lt;= 200% of Poverty     18.6 2015  1
## 3      2      &lt;= 250% of Poverty     17.8 2015  1
## 4      3      &lt;= 138% of Poverty     19.1 2015  1
## 5      4      &lt;= 400% of Poverty     15.1 2015  1
## 6      5 138% to 400% of Poverty     12.8 2015  1</code></pre>
</div>
</div>
<div id="additional-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-resources" class="anchor"></a>Additional resources</h2>
<ul>
<li><a href="https://www.census.gov/data/developers/guidance/api-user-guide.Overview.html">Census Data API User Guide</a></li>
</ul>
</div>
<div id="disclaimer" class="section level2">
<h2 class="hasAnchor">
<a href="#disclaimer" class="anchor"></a>Disclaimer</h2>
<p>This product uses the Census Bureau Data API but is not endorsed or certified by the Census Bureau.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#api-key-setup">API key setup</a></li>
      <li><a href="#finding-your-api">Finding your API</a></li>
      <li><a href="#using-getcensus">Using <code>getCensus</code></a></li>
      <li><a href="#additional-resources">Additional resources</a></li>
      <li><a href="#disclaimer">Disclaimer</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Hannah Recht.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
